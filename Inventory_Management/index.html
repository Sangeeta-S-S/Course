<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <script src="./controller.js"></script>

</head>

<body onload="checkSession()">
    <div class="container mt-4 content">
        <div class="row mt-4">
            <div class="col"><a href="./index.html" class="btn btn-primary"> Home </a></div>
            <div class="col"><a href="./admin.html" class="btn btn-primary"> Admin </a></div>
            <div class="col"><a href="./cart.html" class="btn btn-warning"> Cart </a></div>
            <div class="col"><a href="./login.html" class="btn btn-primary"> Login </a></div>
            <div class="col"><a href="./logout.html" class="btn btn-primary"> LogOff </a></div>
        </div>
        <div class="row mt-4" id="items">
            <!-- <div class="col">
                <div class="card" style="width: 18rem;">
                    <img src="./asserts/images/product1.png" class="card-img-top" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">Shampoo</h5>
                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of
                            the card's content.</p>
                        <button type="button" class="btn btn-warning">Add to Cart</button>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card" style="width: 18rem;">
                    <img src="./asserts/images/product2.png" class="card-img-top" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">Handwash</h5>
                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of
                            the card's content.</p>
                        <button type="button" class="btn btn-warning">Add to Cart</button>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card" style="width: 18rem;">
                    <img src="./asserts/images/product3.png" class="card-img-top" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">Oil</h5>
                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of
                            the card's content.</p>
                        <button type="button" class="btn btn-warning">Add to Cart</button>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card" style="width: 18rem;">
                    <img src="./asserts/images/product1.png" class="card-img-top" alt="...">
                    <div class="card-body">
                    <h5 class="card-title">Shampoo</h5>
                    <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                    <button type="button" class="btn btn-warning">Add to Cart</button>
                    </div>
                </div>
            </div>
        </div> -->
        </div>
        <script>
            getProducts();
            
            var products = [];
            function getProducts() {
                let productDetails = displayProducts();
                productDetails
                    .then((response) => response.json())
                    .then((data) => {
                        products = data;
                        console.log(data);
                        let result = "";
                        console.log(products);
                        for (let product of products) {
                            result += '<div class="col">';
                            result += '<div class="card" style="width: 18rem;">';
                            result += '<img src="' + product.prodImg + '" class="card-img-top" alt="...">'
                            result += '<div class="card-body">';
                            result += '<h5 class="card-title">' + product.productName + '</h5>';
                            result += '<p class="card-text">' + product.description +'<br> '+
                                ' Stock - ' + product.stock +'<br>'+
                                ' Price: ' + product.price +
                                '</p>';
                            result += '<button type="button" class="btn btn-warning" onclick="addProducts(' + product.id + ')">Add to Cart</button>'

                                + '</div>' +
                                '</div>' +
                                '</div>';
                        }
                        document.getElementById('items').innerHTML = result;
                    });
            }
            function addProducts(productId) {
                let addProduct = products.filter((prd) => { return prd.id == productId })[0];
                console.log(addProduct);
                let cart = {
                    "count":0 ,
                    "price":addProduct.price ,
                    "total": 0,
                    "status": false,
                    "prodImg": addProduct.prodImg,
                    "prodcutId": addProduct.prodcutId,
                    "description": addProduct.description,
                    "productName": addProduct.productName
                }
                console.log(cart);
                addToCart(cart);

                // let cartProduct = addToCart();
                /*cartProduct
                    // .then((response) => { return response.json(); })
                    .then((response)=> response.json)
                    .then((data) => {
                        // console.log(addProduct);
                        // console.log(data);
                        let result="";
                        result+=''
                    });*/
            }
            
        </script>
</body>

</html>